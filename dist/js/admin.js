!function(){const{epla:e}=window,{__:t}=wp.i18n;jQuery(document).ready((function(a){function n(e,t){return t.trim()}function r(){return{allow_pattern:a("#feature_meta_key_allow_pattern_setting").val(),deny_pattern:a("#feature_meta_key_deny_pattern_setting").val()}}a(".right .ep-feature-meta_key_pattern").css("display","block"),a(".left .ep-feature-search_algorithm").appendTo(".right"),a("#feature_meta_key_allow_pattern_setting").val(n),a("#feature_meta_key_deny_pattern_setting").val(n);const s=r();function i(){return{isEnable:a("#feature_active_search_algorithm_enabled").is(":checked"),version:a('input[name="feature_search_algorithm_version_setting"]:checked').val()}}function c(){!!a(".ep-feature-search_algorithm .settings.inside .requirements-status-notice").length||(a(".ep-feature-search_algorithm").addClass("feature-requirements-status-0"),a(".ep-feature-search_algorithm .settings.inside").prepend(`<div class="requirements-status-notice">${t("This change will be reflected on the next page reload or expiration of any front-end caches.","elasticpress-labs")}</div>`))}let u=i();a(document).ajaxSuccess((function(t,n,i){if(i?.data?.includes("action=ep_save_feature&feature=meta_key_pattern")){if(a("#feature_active_meta_key_pattern_enabled").is(":checked")){const t=r();if(JSON.stringify(s)!==JSON.stringify(t)){a.ajax({method:"post",url:e.ajax_url,data:{action:"epl_meta_key_pattern_after_save",nonce:e.nonce}});!!a(".ep-feature-meta_key_pattern .settings.inside .requirements-status-notice").length||(a(".ep-feature-meta_key_pattern").removeClass("feature-requirements-status-0").addClass("feature-requirements-status-1"),a(".ep-feature-meta_key_pattern .settings.inside").prepend(`<div class="requirements-status-notice">${e.sync_notice}</div>`))}}}})).ajaxSuccess((function(e,t,a){if(a?.data?.includes("action=ep_save_feature&feature=search_algorithm")){const e=i();u?.isEnable!==e?.isEnable&&"3.4"===e?.version&&c(),e?.isEnable&&u?.version!==e.version&&c(),u=e}}))}));const a=document.querySelector(".ep-features");if(a){const e=window.fetch,t=async(t,a)=>{const n=await e(t,a);return window.location.reload(),n},n=a=>{const n=a.target;window.fetch="elasticpress_labs"===n.feature.value?t:e};a.addEventListener("submit",n,{capture:!0})}}();